"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[802],{61802:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:10}},[e("a-col",{attrs:{md:6,sm:4}},[e("a-form-item",{attrs:{label:"省份"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择查询",showArrow:!0,options:t.nameZero},model:{value:t.regionZero,callback:function(e){t.regionZero=e},expression:"regionZero"}})],1)],1),e("a-col",{attrs:{md:6,sm:4}},[e("a-form-item",{attrs:{label:"城市"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择查询",showArrow:!0,options:t.nameOne},model:{value:t.regionOne,callback:function(e){t.regionOne=e},expression:"regionOne"}})],1)],1),e("a-col",{attrs:{md:6,sm:4}},[e("a-form-item",{attrs:{label:"区县"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择查询",showArrow:!0,options:t.nameTwo},model:{value:t.regionTwo,callback:function(e){t.regionTwo=e},expression:"regionTwo"}})],1)],1),e("a-col",{attrs:{md:6,sm:4}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary"},on:{click:t.findData}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.dropData}},[t._v("重置")])],1)])],1)],1)],1),e("a-table",{attrs:{rowKey:"item_code",loading:t.loading,columns:t.columns,dataSource:t.itemList,pagination:t.itemPage},on:{change:t.loadData},scopedSlots:t._u([{key:"number",fn:function(n,a,o){return e("span",{},[t._v(" "+t._s(o+1)+" ")])}}])})],1)])},o=[],i=(n(33479),n(61907)),r=(n(54286),n(16162),n(12577),n(81927)),s={name:"WeatherList",data:function(){return{loading:!1,formList:{},regionZero:"",regionOne:"",regionTwo:"",nameZero:[],nameOne:[],nameTwo:[],itemList:[],itemPage:{total:0,current:0,pageSize:50,hideOnSinglePage:!0,showTotal:function(t){return"共 ".concat(t," 项")}},columns:[{title:"序号",align:"center",scopedSlots:{customRender:"number"}},{title:"省份",align:"center",dataIndex:"province"},{title:"城市",align:"center",dataIndex:"city"},{title:"区县",align:"center",dataIndex:"name"},{title:"实时温度",align:"center",dataIndex:"temp",customRender:function(t){return t+"℃"}},{title:"体感温度",align:"center",dataIndex:"feels_like",customRender:function(t){return t+"℃"}},{title:"相对湿度",align:"center",dataIndex:"rh",customRender:function(t){return t+"%"}},{title:"天气现象",align:"center",dataIndex:"text"},{title:"更新时间",align:"center",dataIndex:"uptime"}]}},created:function(){this.loadData()},methods:{loadData:function(t){this.regionData("中国",0),this.weatherData()},findData:function(){""!==this.regionOne||""!==this.regionTwo?this.weatherData():i.Z.error("请至少选择城市")},dropData:function(){this.formList={},this.regionZero="",this.regionOne="",this.regionTwo="",this.loadData()},weatherData:function(){var t=this;this.loading=!0;var e="";e=""!==this.regionTwo?this.regionTwo:""!==this.regionOne?this.regionOne:this.regionZero,""!==e&&(this.formList.region_item=e),(0,r.gZ)(this.formList).then((function(e){t.itemList=e.data,t.itemList.map((function(e){return e.uptime=t.formatTime(e.uptime),e})),t.loading=!1}))},regionData:function(t,e){var n=this,a={region_from:t};(0,r._g)(a).then((function(t){var a=t.data.map((function(t){return{label:t.name,value:t.code}}));0===e?n.nameZero=a:1===e?n.nameOne=a:n.nameTwo=a}))},formatTime:function(t){for(var e=[t.substring(0,4)],n=4;n<t.length;n+=2)e.push(t.substring(n,n+2));return"".concat(e[0],"-").concat(e[1],"-").concat(e[2]," ").concat(e[3],":").concat(e[4],":").concat(e[5])}},watch:{regionZero:function(t){this.regionData(t,1)},regionOne:function(t){this.regionData(t,2)}}},c=s,l=n(78302),u=(0,l.Z)(c,a,o,!1,null,null,null),d=u.exports}}]);